#!/usr/bin/python

from comma.csv.fields import *
from numpy import *

point = struct( 'x,y,z', float64, float64, float64 )
timestamped_point = struct( 't,point', 'datetime64[us]', point )

s = stream( timestamped_point, fields=',point/z,point/y,t,point/x', format='i4,d,d,datetime64[us],d' )
#s = stream( timestamped_point )
for i in s.iter( size=2 ):
  i.t += timedelta64( 5, 's' )
  i.point.x += 0
  i.point.y += 1
  i.point.z += 2
  s.write(i)
